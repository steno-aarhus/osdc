<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create inclusion dates from all the inclusion events — create_inclusion_dates • osdc</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create inclusion dates from all the inclusion events — create_inclusion_dates"><meta name="description" content="This function takes the output from
join_inclusions() and defines the final inclusion dates, raw and stable
based on all inclusion event types. Since inclusion requires at least two
events (can be multiple events of the same type or any combination of
different types), this function keeps only those with 2 or more events. E.g.,
an individual with two elevated HbA1c tests followed by a glucose-lowering
drug purchase is included at the latest elevated HbA1c test. Had the second
HbA1c test not been performed (or had it returned a result below the
diagnostic threshold), this person would instead have been included at the
date of the first purchase of glucose-lowering drugs."><meta property="og:description" content="This function takes the output from
join_inclusions() and defines the final inclusion dates, raw and stable
based on all inclusion event types. Since inclusion requires at least two
events (can be multiple events of the same type or any combination of
different types), this function keeps only those with 2 or more events. E.g.,
an individual with two elevated HbA1c tests followed by a glucose-lowering
drug purchase is included at the latest elevated HbA1c test. Had the second
HbA1c test not been performed (or had it returned a result below the
diagnostic threshold), this person would instead have been included at the
date of the first purchase of glucose-lowering drugs."><meta property="og:image" content="https://steno-aarhus.github.io/osdc/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">osdc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.22</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/osdc.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/rationale.html">Rationale</a></li>
    <li><a class="dropdown-item" href="../articles/design.html">Design</a></li>
    <li><a class="dropdown-item" href="../articles/algorithm.html">Algorithm</a></li>
    <li><a class="dropdown-item" href="../articles/changes.html">Changes from original</a></li>
    <li><a class="dropdown-item" href="../articles/data-sources.html">Data sources</a></li>
    <li><a class="dropdown-item" href="../articles/function-flow.html">Function flow</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/steno-aarhus/osdc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create inclusion dates from all the inclusion events</h1>
      <small class="dont-index">Source: <a href="https://github.com/steno-aarhus/osdc/blob/main/R/create-inclusion-dates.R" class="external-link"><code>R/create-inclusion-dates.R</code></a></small>
      <div class="d-none name"><code>create_inclusion_dates.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function takes the output from
<code><a href="join_inclusions.html">join_inclusions()</a></code> and defines the final inclusion dates, raw and stable
based on all inclusion event types. Since inclusion requires at least two
events (can be multiple events of the same type or any combination of
different types), this function keeps only those with 2 or more events. E.g.,
an individual with two elevated HbA1c tests followed by a glucose-lowering
drug purchase is included at the latest elevated HbA1c test. Had the second
HbA1c test not been performed (or had it returned a result below the
diagnostic threshold), this person would instead have been included at the
date of the first purchase of glucose-lowering drugs.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_inclusion_dates</span><span class="op">(</span><span class="va">inclusions</span>, stable_inclusion_start_date <span class="op">=</span> <span class="st">"1998-01-01"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-inclusions">inclusions<a class="anchor" aria-label="anchor" href="#arg-inclusions"></a></dt>
<dd><p>Output from <code><a href="join_inclusions.html">join_inclusions()</a></code>.</p></dd>


<dt id="arg-stable-inclusion-start-date">stable_inclusion_start_date<a class="anchor" aria-label="anchor" href="#arg-stable-inclusion-start-date"></a></dt>
<dd><p>Cutoff date after which inclusion events
are considered reliable (e.g., after changes in drug labeling or data
entry practices). Defaults to "1998-01-01" which is one year after
obstetric codes are reliable in the GLD data (since we use LPR data to
drop rows related to gestational diabetes). This limits the included
cohort to individuals with inclusion dates after this cutoff date.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The same type as the input data, as a <code><a href="https://duckplyr.tidyverse.org/reference/duckdb_tibble.html" class="external-link">duckplyr::duckdb_tibble()</a></code>,
with the <code>pnr</code> and <code>date</code> columns along with the columns from the input
that's needed to classify T1D.
It also creates two new columns:</p><ul><li><p><code>raw_inclusion_date</code>: Date of raw inclusion, the second earliest recorded
event for each individual.</p></li>
<li><p><code>stable_inclusion_date</code>: Same as raw inclusion date, but set to <code>NA</code> if
the raw inclusion date is before the stable inclusion start date.</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Signe Kirk Brødbæk, Anders Aasted Isaksen, Luke William Johnston.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

