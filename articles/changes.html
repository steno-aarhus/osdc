<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Changes from original • osdc</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="changes_files/libs/quarto-html/popper.min.js"></script><script src="changes_files/libs/quarto-html/tippy.umd.min.js"></script><link href="changes_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="changes_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changes from original">
<meta property="og:image" content="https://steno-aarhus.github.io/osdc/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">osdc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.18</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/osdc.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/rationale.html">Rationale</a></li>
    <li><a class="dropdown-item" href="../articles/design.html">Design</a></li>
    <li><a class="dropdown-item" href="../articles/algorithm.html">Algorithm</a></li>
    <li><a class="dropdown-item" href="../articles/changes.html">Changes from original</a></li>
    <li><a class="dropdown-item" href="../articles/data-sources.html">Data sources</a></li>
    <li><a class="dropdown-item" href="../articles/function-flow.html">Function flow</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/steno-aarhus/osdc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changes from original</h1>




      <small class="dont-index">Source: <a href="https://github.com/steno-aarhus/osdc/blob/main/vignettes/changes.qmd" class="external-link"><code>vignettes/changes.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <p>In this vignette, you’ll find a description of the changes that have been made to the OSDC algorithm since its <a href="https://doi.org/10.2147/CLEP.S407019" class="external-link">original validation</a>. The osdc package uses the latest changes to the algorithm. Potential changes to the algorithm, rather than the specific implementation and code details, that we might in the future will also be described in this vignette. We will also provide validation metrics here whenever we make a change, and track these validations over the different versions.</p>
<section class="level2"><h2 id="specific-changes-since-the-original-validation-version-from-the-paper">Specific changes since the original validation (version from the paper)<a class="anchor" aria-label="anchor" href="#specific-changes-since-the-original-validation-version-from-the-paper"></a>
</h2>
<section class="level3"><h3 id="version-1-0">Version 1.0<a class="anchor" aria-label="anchor" href="#version-1-0"></a>
</h3>
<ol type="1">
<li>Purchases of GLP1-RA, dapagliflozin or empagliflozin are no longer used for inclusion nor type-classification.
<ul>
<li>Due to increasing use in treatment of non-diabetes.</li>
</ul>
</li>
<li>For T1D classification, the window of 180 days to make a purchase of an insulin is now evaluated from the date of the first purchase of a glucose-lowering drug, rather than the date of inclusion.
<ul>
<li>To simplify computations and increase robustness to noise and atypical cases.</li>
</ul>
</li>
<li>Purchases of insulin in the previous year is no longer required for T1D classification.
<ul>
<li>Because we found that the vast majority of individuals classified as T2D due to this criteria, reported that they had T1D in the data from Health in Central Denmark.</li>
</ul>
</li>
<li>The logic defining pregnancy index dates has been simplified to only use diagnoses of pregnancy endings (no longer uses data on maternal care visits).
<ul>
<li>For the sake of simplicity, as we found no impact on classification accuracy in the Health in Central Denmark data.</li>
</ul>
</li>
<li>HbA1c samples taken on the same date are de-duplicated.
<ul>
<li>To better align with recommended diagnostic practice <span class="citation" data-cites="WHO2011">(<a href="#ref-WHO2011" role="doc-biblioref">World Health Organization 2011</a>)</span>. In the original implementation, only samples taken at the exact same time were de-duplicated.</li>
</ul>
</li>
</ol></section></section><section class="level2"><h2 id="validity">Validity<a class="anchor" aria-label="anchor" href="#validity"></a>
</h2>
<p>The validity of the OSDC algorithm is tested against self-reported diabetes type in the Health in Central Denmark survey. The results are reported as overall PPV (positive predictive value) and sensitivity for each version of the algorithm and within subsets of the diabetes population reporting onset of diabetes before or after age 40, respectively, similar to tables 1 &amp; 2 of the original validation paper <span class="citation" data-cites="Isaksen2023">(<a href="#ref-Isaksen2023" role="doc-biblioref">Isaksen, Sandbæk, and Bjerg 2023</a>)</span>.</p>
<section class="level3"><h3 id="validity-in-2019">Validity in 2019<a class="anchor" aria-label="anchor" href="#validity-in-2019"></a>
</h3>
<p>This uses the same data as <a href="https://doi.org/10.2147/CLEP.S407019" class="external-link">the original validation paper</a> and provides a direct comparison to the original implementation.</p>
<section class="level4"><h4 id="stratified-by-diabetes-type-and-age-at-onset">Stratified by diabetes type and age at onset<a class="anchor" aria-label="anchor" href="#stratified-by-diabetes-type-and-age-at-onset"></a>
</h4>
<table class="table caption-top">
<thead><tr class="header">
<th>Version</th>
<th>Diabetes type</th>
<th>PPV</th>
<th>Sensitivity</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Paper</td>
<td>T1D</td>
<td>0.943</td>
<td>0.773</td>
</tr>
<tr class="even">
<td>Paper</td>
<td>T1D &gt;40 yrs</td>
<td>0.708</td>
<td>0.378</td>
</tr>
<tr class="odd">
<td>Paper</td>
<td>T2D</td>
<td>0.875</td>
<td>0.944</td>
</tr>
<tr class="even">
<td>Paper</td>
<td>T2D &lt;40 yrs</td>
<td>0.471</td>
<td>0.863</td>
</tr>
</tbody>
</table>
<table class="table caption-top">
<thead><tr class="header">
<th>Version</th>
<th>Diabetes type</th>
<th>PPV</th>
<th>Sensitivity</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1.0</td>
<td>T1D</td>
<td>0.944</td>
<td>0.783</td>
</tr>
<tr class="even">
<td>1.0</td>
<td>T1D &gt;40 yrs</td>
<td>0.708</td>
<td>0.378</td>
</tr>
<tr class="odd">
<td>1.0</td>
<td>T2D</td>
<td>0.879</td>
<td>0.944</td>
</tr>
<tr class="even">
<td>1.0</td>
<td>T2D &lt;40 yrs</td>
<td>0.480</td>
<td>0.863</td>
</tr>
</tbody>
</table></section><section class="level4"><h4 id="bootstrapped-metrics">Bootstrapped metrics<a class="anchor" aria-label="anchor" href="#bootstrapped-metrics"></a>
</h4>
<p>Corresponds to supplementary table S3 of the validation paper.</p>
<table class="table caption-top">
<thead><tr class="header">
<th>Version</th>
<th>Diabetes type</th>
<th>Sensitivity</th>
<th>Specificity</th>
<th>PPV</th>
<th>NPV</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Paper</td>
<td>T1D</td>
<td>0.774</td>
<td>0.999</td>
<td>0.951</td>
<td>0.997</td>
</tr>
<tr class="even">
<td>Paper</td>
<td>T2D</td>
<td>0.943</td>
<td>0.989</td>
<td>0.878</td>
<td>0.995</td>
</tr>
</tbody>
</table>
<table class="table caption-top">
<thead><tr class="header">
<th>Version</th>
<th>Diabetes type</th>
<th>Sensitivity</th>
<th>Specificity</th>
<th>PPV</th>
<th>NPV</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1.0</td>
<td>T1D</td>
<td>0.788</td>
<td>0.999</td>
<td>0.947</td>
<td>0.997</td>
</tr>
<tr class="even">
<td>1.0</td>
<td>T2D</td>
<td>0.940</td>
<td>0.990</td>
<td>0.881</td>
<td>0.995</td>
</tr>
</tbody>
</table></section></section><section class="level3"><h3 id="validity-in-2025">Validity in 2025<a class="anchor" aria-label="anchor" href="#validity-in-2025"></a>
</h3>
<p>This section will contain metrics from validation performed in subsequent survey waves of Health in Central Denmark, as this data becomes available.</p>
</section></section><section class="level2"><h2 id="potential-future-changes">Potential future changes<a class="anchor" aria-label="anchor" href="#potential-future-changes"></a>
</h2>
<ol type="1">
<li>Add support for using medical birth register to define pregnancies to censor gestational diabetes (GDM). This will allow for the censoring of glucose-lowering drug (GLD) purchases all the way back to 1995 (rather than 1997 onward, as the obstetric codes are limited to), and enable the extension of the window of valid dates of diagnosis to 1996 onward.</li>
<li>Limit the historic scope of primary diagnoses used to evaluate majority of diabetes-specific diagnoses in type classification (e.g. only evaluate majority among the last five type-specific diabetes diagnoses).</li>
</ol></section><section class="level2 unnumbered"><h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Isaksen2023" class="csl-entry" role="listitem">
Isaksen, Anders Aasted, Annelli Sandbæk, and Lasse Bjerg. 2023. <span>“Validation of Register-Based Diabetes Classifiers in Danish Data.”</span> <em>Clinical Epidemiology</em> Volume 15 (May): 569–81. <a href="https://doi.org/10.2147/clep.s407019" class="external-link">https://doi.org/10.2147/clep.s407019</a>.
</div>
<div id="ref-WHO2011" class="csl-entry" role="listitem">
World Health Organization. 2011. <span>“Use of Glycated Haemoglobin (<span>HbA1c</span>) in Diagnosis of Diabetes Mellitus: Abbreviated Report of a <span>WHO</span> Consultation.”</span>
</div>
</div>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Signe Kirk Brødbæk, Anders Aasted Isaksen, Luke William Johnston.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
