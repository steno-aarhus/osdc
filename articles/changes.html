<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Changes to algorithm • osdc</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changes to algorithm">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">osdc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/osdc.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/changes.html">Changes to algorithm</a></li>
    <li><a class="dropdown-item" href="../articles/data-sources.html">Data sources</a></li>
    <li><a class="dropdown-item" href="../articles/design.html">Design</a></li>
    <li><a class="dropdown-item" href="../articles/function-flow.html">Function flow</a></li>
    <li><a class="dropdown-item" href="../articles/rationale.html">Rationale</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/steno-aarhus/osdc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changes to algorithm</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/steno-aarhus/osdc/blob/main/vignettes/changes.Rmd" class="external-link"><code>vignettes/changes.Rmd</code></a></small>
      <div class="d-none name"><code>changes.Rmd</code></div>
    </div>

    
    
<p>In this vignette, you’ll find a description of the changes that have
been made to the OSDC algorithm since its <a href="https://doi.org/10.2147/CLEP.S407019" class="external-link">original validation</a>. The
osdc package uses the latest changes to the algorithm. Potential changes
to the algorithm, rather than the specific implementation and code
details, that we might in the future will also be described in this
vignette. We will also provide validation metrics here whenever we make
a change, and track these validations over the different versions.</p>
<div class="section level2">
<h2 id="specific-changes-since-the-original-validation-version-from-the-paper">Specific changes since the original validation (version from the
paper)<a class="anchor" aria-label="anchor" href="#specific-changes-since-the-original-validation-version-from-the-paper"></a>
</h2>
<div class="section level3">
<h3 id="version-1-1">Version 1.1<a class="anchor" aria-label="anchor" href="#version-1-1"></a>
</h3>
<ol style="list-style-type: decimal">
<li>We don’t use purchases of semaglutid, dapagliflozin or
empagliflozin, neither for inclusion events nor classification of
diabetes type (due to increasing use in treatment of non-diabetes).</li>
<li>We no longer use diabetes type reclassification based on insulin
purchases in the previous year.</li>
<li>The logic defining pregnancy index dates has been simplified to only
use diagnoses of pregnancy endings (no longer uses data on maternal care
visits).</li>
<li>De-duplicates subsequent HbA1c samples taken on the same date
(originally, if a sampling time was available in the lab data, only
samples taken at the same time were de-duplicated)</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="validity">Validity<a class="anchor" aria-label="anchor" href="#validity"></a>
</h2>
<p>Algorithm validity across versions. Reports <code>PPV</code>
(<em>positive predictive value</em>) and <code>sensitivity</code> for
typical cases and cases with atypical age at onset of T1D (after age 40)
and T2D (before age 40), respectively.</p>
<div class="section level3">
<h3 id="on-pre-2019-data-as-in-the-paper">On pre-2019 data (as in the paper)<a class="anchor" aria-label="anchor" href="#on-pre-2019-data-as-in-the-paper"></a>
</h3>
<p><strong>Overall and age at onset-stratified (paper table 1 &amp;
2):</strong></p>
<table class="table">
<thead><tr class="header">
<th>Version</th>
<th>Diabetes type</th>
<th>PPV</th>
<th>Sensitivity</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Paper</td>
<td>T1D</td>
<td>0.943</td>
<td>0.773</td>
</tr>
<tr class="even">
<td>Paper</td>
<td>T1D &gt;40 yrs</td>
<td>0.708</td>
<td>0.378</td>
</tr>
<tr class="odd">
<td>Paper</td>
<td>T2D</td>
<td>0.875</td>
<td>0.944</td>
</tr>
<tr class="even">
<td>Paper</td>
<td>T2D &lt;40 yrs</td>
<td>0.471</td>
<td>0.863</td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th>Version</th>
<th>Diabetes type</th>
<th>PPV</th>
<th>Sensitivity</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1.1</td>
<td>T1D</td>
<td>0.943</td>
<td>0.789</td>
</tr>
<tr class="even">
<td>1.1</td>
<td>T1D &gt;40 yrs</td>
<td>0.871</td>
<td>0.871</td>
</tr>
<tr class="odd">
<td>1.1</td>
<td>T2D</td>
<td>0.883</td>
<td>0.941</td>
</tr>
<tr class="even">
<td>1.1</td>
<td>T2D &lt;40 yrs</td>
<td>0.519</td>
<td>0.857</td>
</tr>
</tbody>
</table>
<p><strong>Bootstrapped metrics (paper S3):</strong></p>
<table class="table">
<thead><tr class="header">
<th>Version</th>
<th>Diabetes type</th>
<th>Sensitivity</th>
<th>Specificity</th>
<th>PPV</th>
<th>NPV</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Paper</td>
<td>T1D</td>
<td>0.774</td>
<td>0.999</td>
<td>0.951</td>
<td>0.997</td>
</tr>
<tr class="even">
<td>Paper</td>
<td>T2D</td>
<td>0.943</td>
<td>0.989</td>
<td>0.878</td>
<td>0.995</td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th>Version</th>
<th>Diabetes type</th>
<th>Sensitivity</th>
<th>Specificity</th>
<th>PPV</th>
<th>NPV</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1.1</td>
<td>T1D</td>
<td>0.781</td>
<td>0.999</td>
<td>0.949</td>
<td>0.997</td>
</tr>
<tr class="even">
<td>1.1</td>
<td>T2D</td>
<td>0.943</td>
<td>0.989</td>
<td>0.879</td>
<td>0.995</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="potential-future-changes">Potential future changes<a class="anchor" aria-label="anchor" href="#potential-future-changes"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Add support for using medical birth register to define pregnancies
to censor gestational diabetes (GDM). This will allow for the censoring
of glucose-lowering drug (GLD) purchases all the way back to 1995
(rather than 1997 onward, as the obstetric codes are limited to), and
enable the extension of the window of valid dates of diagnosis to 1996
onward.</li>
<li>Limit the historic scope of primary diagnoses used to evaluate
majority of diabetes-specific diagnoses in type classification (e.g.
only evaluate majority among the last five type-specific diabetes
diagnoses).</li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Luke William Johnston, Signe Kirk Brødbæk, Anders Aasted Isaksen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
